{"ast":null,"code":"var _jsxFileName = \"/home/ts/Desktop/Ashish SIngh (ASS)/stripe payment integrations/stripe-integration/src/components/PaymentForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { CardElement, useStripe, useElements } from '@stripe/react-stripe-js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PaymentForm = ({\n  clientSecret,\n  product\n}) => {\n  _s();\n  const stripe = useStripe();\n  const elements = useElements();\n  const [error, setError] = useState(null);\n  const [processing, setProcessing] = useState(false);\n  const [succeeded, setSucceeded] = useState(false);\n  const handleSubmit = async event => {\n    event.preventDefault();\n    setProcessing(true);\n    try {\n      if (!stripe || !elements) {\n        throw new Error('Stripe has not loaded');\n      }\n      const {\n        error,\n        paymentIntent\n      } = await stripe.confirmCardPayment(clientSecret, {\n        payment_method: {\n          card: elements.getElement(CardElement)\n        }\n      });\n      if (error) {\n        throw error;\n      }\n\n      // Confirm payment on backend\n      const response = await fetch(`http://localhost:8000/api/products/${product.id}/confirm_payment/`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          payment_intent_id: paymentIntent.id\n        })\n      });\n      const data = await response.json();\n      if (data.error) {\n        throw new Error(data.error);\n      }\n      setSucceeded(true);\n      setError(null);\n    } catch (err) {\n      setError(err.message);\n    } finally {\n      setProcessing(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"payment-form-container max-w-md mx-auto mt-8 p-4 border rounded\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-xl mb-4\",\n      children: [\"Complete Purchase: \", product.name]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-4\",\n        children: /*#__PURE__*/_jsxDEV(CardElement, {\n          options: {\n            style: {\n              base: {\n                fontSize: '16px',\n                color: '#424770',\n                '::placeholder': {\n                  color: '#aab7c4'\n                }\n              },\n              invalid: {\n                color: '#9e2146'\n              }\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-red-500 mb-4\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 21\n      }, this), succeeded && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-green-500 mb-4\",\n        children: \"Payment successful!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: processing || !stripe || succeeded,\n        className: \"w-full bg-blue-500 text-white py-2 px-4 rounded disabled:opacity-50\",\n        children: processing ? 'Processing...' : `Pay $${product.price}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      jsx: true,\n      children: `\n                .payment-form-container {\n                    background-color: #fff;\n                    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n                    border-radius: 8px;\n                }\n\n                .payment-form-container h2 {\n                    font-size: 1.5rem;\n                    color: #333;\n                }\n\n                .payment-form-container .mb-4 {\n                    margin-bottom: 1rem;\n                }\n\n                .payment-form-container .bg-blue-500 {\n                    background-color: #3b82f6;\n                    transition: background-color 0.3s ease;\n                }\n\n                .payment-form-container .bg-blue-500:hover {\n                    background-color: #2563eb;\n                }\n\n                .payment-form-container .text-red-500 {\n                    color: #dc2626;\n                    font-size: 1rem;\n                }\n\n                .payment-form-container .text-green-500 {\n                    color: #16a34a;\n                    font-size: 1rem;\n                }\n\n                .payment-form-container button:disabled {\n                    background-color: #d1d5db;\n                }\n            `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 9\n  }, this);\n};\n_s(PaymentForm, \"/1FXBerNWoc+yf52U3G9a6J2J+E=\", false, function () {\n  return [useStripe, useElements];\n});\n_c = PaymentForm;\nexport default PaymentForm;\nvar _c;\n$RefreshReg$(_c, \"PaymentForm\");","map":{"version":3,"names":["React","useState","CardElement","useStripe","useElements","jsxDEV","_jsxDEV","PaymentForm","clientSecret","product","_s","stripe","elements","error","setError","processing","setProcessing","succeeded","setSucceeded","handleSubmit","event","preventDefault","Error","paymentIntent","confirmCardPayment","payment_method","card","getElement","response","fetch","id","method","headers","body","JSON","stringify","payment_intent_id","data","json","err","message","className","children","name","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","options","style","base","fontSize","color","invalid","type","disabled","price","jsx","_c","$RefreshReg$"],"sources":["/home/ts/Desktop/Ashish SIngh (ASS)/stripe payment integrations/stripe-integration/src/components/PaymentForm.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { CardElement, useStripe, useElements } from '@stripe/react-stripe-js';\n\nconst PaymentForm = ({ clientSecret, product }) => {\n    const stripe = useStripe();\n    const elements = useElements();\n    const [error, setError] = useState(null);\n    const [processing, setProcessing] = useState(false);\n    const [succeeded, setSucceeded] = useState(false);\n\n    const handleSubmit = async (event) => {\n        event.preventDefault();\n        setProcessing(true);\n\n        try {\n            if (!stripe || !elements) {\n                throw new Error('Stripe has not loaded');\n            }\n\n            const { error, paymentIntent } = await stripe.confirmCardPayment(\n                clientSecret,\n                {\n                    payment_method: {\n                        card: elements.getElement(CardElement),\n                    },\n                }\n            );\n\n            if (error) {\n                throw error;\n            }\n\n            // Confirm payment on backend\n            const response = await fetch(\n                `http://localhost:8000/api/products/${product.id}/confirm_payment/`,\n                {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                    },\n                    body: JSON.stringify({\n                        payment_intent_id: paymentIntent.id,\n                    }),\n                }\n            );\n\n            const data = await response.json();\n            \n            if (data.error) {\n                throw new Error(data.error);\n            }\n\n            setSucceeded(true);\n            setError(null);\n        } catch (err) {\n            setError(err.message);\n        } finally {\n            setProcessing(false);\n        }\n    };\n\n    return (\n        <div className=\"payment-form-container max-w-md mx-auto mt-8 p-4 border rounded\">\n            <h2 className=\"text-xl mb-4\">Complete Purchase: {product.name}</h2>\n            <form onSubmit={handleSubmit}>\n                <div className=\"mb-4\">\n                    <CardElement\n                        options={{\n                            style: {\n                                base: {\n                                    fontSize: '16px',\n                                    color: '#424770',\n                                    '::placeholder': {\n                                        color: '#aab7c4',\n                                    },\n                                },\n                                invalid: {\n                                    color: '#9e2146',\n                                },\n                            },\n                        }}\n                    />\n                </div>\n\n                {error && (\n                    <div className=\"text-red-500 mb-4\">\n                        {error}\n                    </div>\n                )}\n\n                {succeeded && (\n                    <div className=\"text-green-500 mb-4\">\n                        Payment successful!\n                    </div>\n                )}\n\n                <button\n                    type=\"submit\"\n                    disabled={processing || !stripe || succeeded}\n                    className=\"w-full bg-blue-500 text-white py-2 px-4 rounded disabled:opacity-50\"\n                >\n                    {processing ? 'Processing...' : `Pay $${product.price}`}\n                </button>\n            </form>\n\n            <style jsx>{`\n                .payment-form-container {\n                    background-color: #fff;\n                    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n                    border-radius: 8px;\n                }\n\n                .payment-form-container h2 {\n                    font-size: 1.5rem;\n                    color: #333;\n                }\n\n                .payment-form-container .mb-4 {\n                    margin-bottom: 1rem;\n                }\n\n                .payment-form-container .bg-blue-500 {\n                    background-color: #3b82f6;\n                    transition: background-color 0.3s ease;\n                }\n\n                .payment-form-container .bg-blue-500:hover {\n                    background-color: #2563eb;\n                }\n\n                .payment-form-container .text-red-500 {\n                    color: #dc2626;\n                    font-size: 1rem;\n                }\n\n                .payment-form-container .text-green-500 {\n                    color: #16a34a;\n                    font-size: 1rem;\n                }\n\n                .payment-form-container button:disabled {\n                    background-color: #d1d5db;\n                }\n            `}</style>\n        </div>\n    );\n};\n\nexport default PaymentForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}